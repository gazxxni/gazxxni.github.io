---
layout: post
title: "[백준] 27497번 알파벳 블록 (Python)"
date: 2026-01-16
categories: [Algorithm, Baekjoon]
tags: [python, algorithm, baekjoon, "27497", 자료 구조, 문자열, 스택, 덱]
---

## 문제 링크
[https://www.acmicpc.net/problem/27497](https://www.acmicpc.net/problem/27497)

---

## 문제
스타는 알파벳 블록을 일렬로 조립하여 문자열을 만드는 게임을 만들었다. 각 블록에는 문자 하나가 적혀 있으며 게임에는 각각 다음 기능을 수행하는 세 개의 버튼이 있다.


	문자열 맨 뒤에 블록 추가
	문자열 맨 앞에 블록 추가
	문자열을 구성하는 블록 중 가장 나중에 추가된 블록 제거


게임은 처음에 빈 문자열로 시작하며 빈 문자열일 때 문자열을 구성하는 블록 중 가장 나중에 추가된 블록을 제거하는 버튼을 누를 경우 아무런 동작도 하지 않는다. 버튼을 누른 횟수와 누른 버튼이 순서대로 주어질 때 완성된 문자열을 구하여라.

---

## 입력
첫째 줄에 버튼을 누른 횟수 N$N$이 주어진다. (1≤N≤1000000)$(1 \leq N \leq 1\,000\,000)$ 

둘째 줄부터 N$N$개의 줄에는 버튼을 누른 순서대로 누른 버튼에 대한 정보를 주며 아래와 같은 형식으로 주어진다.


	1 c : 문자열 맨 뒤에 c가 적힌 블록 추가
	2 c : 문자열 맨 앞에 c가 적힌 블록 추가
	3 : 문자열을 구성하는 블록 중 가장 나중에 추가된 블록 제거


c는 알파벳 대문자 또는 소문자로 주어진다.

---

## 출력
완성된 문자열을 출력한다. 완성된 문자열이 빈 문자열인 경우 0을 출력한다.

---

## 성능 요약
메모리: 234232 KB, 시간: 520 ms

---

## 풀이

### 풀이 핵심 로직
이 문제는 문자열의 양 끝에 블록을 추가하거나, 마지막에 추가된 블록을 제거하는 동작을 수행하는 문제입니다. 파이썬의 `deque`를 사용하여 양쪽 끝에서의 효율적인 삽입 및 삭제를 지원하며, 추가적인 리스트를 통해 마지막 블록의 추가 위치를 기록해 두어, 블록 제거 시 어떤 위치에서 제거할지를 쉽게 관리합니다.

### 동작 과정
1. 입력으로 주어진 버튼을 누른 횟수 N을 읽습니다.
2. N번 만큼 반복하여 각 버튼의 명령을 처리합니다.
   - `1 c`: 문자열 맨 뒤에 c를 추가합니다. `deque`의 `append` 메서드를 사용하여 c를 추가하고, 추가 동작을 기록하기 위해 `log` 리스트에 1을 추가합니다.
   - `2 c`: 문자열 맨 앞에 c를 추가합니다. `deque`의 `appendleft` 메서드를 사용하여 c를 추가하고, `log` 리스트에 2를 추가합니다.
   - `3`: 마지막에 추가된 블록을 제거합니다. `log` 리스트에서 마지막 동작을 확인하여, 마지막 블록이 어디에서 추가된 것인지에 따라 `pop` 또는 `popleft`를 사용하여 블록을 제거합니다.
3. 모든 명령을 처리한 후, `deque`에 남아 있는 블록들을 출력합니다. 만약 비어있다면 0을 출력합니다.

예시를 들어보면, 입력이 다음과 같을 경우:
```
5
1 A
1 B
3
2 C
3
```
- 1 A: 문자열 = "A"
- 1 B: 문자열 = "AB"
- 3: 마지막 블록 B 제거, 문자열 = "A"
- 2 C: 문자열 = "CA"
- 3: 마지막 블록 A 제거, 문자열 = "C"

결과적으로 출력은 "C"가 됩니다.

### 시간 복잡도
이 알고리즘의 시간 복잡도는 O(N)입니다. 각 버튼 누름에 대해 최대 O(1)의 시간 복잡도로 처리할 수 있으므로, 전체적으로 N번의 버튼 누름을 처리하는 데 O(N)이 소요됩니다.

---

## 코드
```python
import sys
from collections import deque
input = sys.stdin.readline

n = int(input())

q = deque()
log = []

for _ in range(n):
    a = input().split()
    n = int(a[0])
    
    if n == 1:
        c = a[1]
        q.append(c)
        log.append(1)
        
    elif n == 2:
        c = a[1]
        q.appendleft(c)
        log.append(2)
        
    else:
        if log:
            k = log.pop()
            
            if k == 1:
                q.pop()
            else:
                q.popleft()
    
    
if not q:
    print(0)
else:
    print(*q, sep='')
```