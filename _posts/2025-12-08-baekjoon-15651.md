---
layout: post
title: "[백준] 15651번 N과 M (3) (Python)"
date: 2025-12-08
categories: [Algorithm, Baekjoon]
tags: [python, algorithm, baekjoon, "15651", 백트래킹]
---

## 문제 링크
[https://www.acmicpc.net/problem/15651](https://www.acmicpc.net/problem/15651)

---

## 문제
자연수 N과 M이 주어졌을 때, 아래 조건을 만족하는 길이가 M인 수열을 모두 구하는 프로그램을 작성하시오.


	1부터 N까지 자연수 중에서 M개를 고른 수열
	같은 수를 여러 번 골라도 된다.

---

## 입력
첫째 줄에 자연수 N과 M이 주어진다. (1 ≤ M ≤ N ≤ 7)

---

## 출력
한 줄에 하나씩 문제의 조건을 만족하는 수열을 출력한다. 중복되는 수열을 여러 번 출력하면 안되며, 각 수열은 공백으로 구분해서 출력해야 한다.

수열은 사전 순으로 증가하는 순서로 출력해야 한다.

---

## 성능 요약
메모리: 149500 KB, 시간: 652 ms

---

## 풀이

### 풀이 핵심 로직
문제는 주어진 N에 대해 1부터 N까지의 자연수를 M개 선택하여 수열을 생성하는 것입니다. 이때, 같은 수를 여러 번 선택할 수 있으며, 결과는 사전 순으로 정렬되어야 합니다. 이를 위해 재귀적인 백트래킹 방법을 사용하여 M개의 수를 선택할 때마다 리스트에 추가하고, 리스트의 길이가 M에 도달하면 결과를 출력합니다.

### 동작 과정
1. **입력**: N과 M을 입력받습니다. 예를 들어, N=3, M=2인 경우입니다.
2. **초기화**: 빈 리스트 `arr`를 생성합니다.
3. **재귀 함수 호출**: `aa()` 함수를 호출하여 수열 생성을 시작합니다.
4. **기저 조건**: `arr`의 길이가 M에 도달하면 해당 수열을 출력합니다.
5. **수열 생성**:
   - 1부터 N까지 반복하면서 (여기서는 1, 2, 3)
   - 현재 숫자를 `arr`에 추가합니다.
   - `aa()` 함수를 재귀적으로 호출하여 다음 수를 추가합니다.
   - 호출이 끝나면 마지막 숫자를 `arr`에서 제거하여 다음 숫자를 추가할 준비를 합니다.
6. **출력**: M개의 숫자가 선택된 수열이 완성되면 출력됩니다.

단계별 설명:
- 첫 번째 호출에서 `arr`는 비어 있습니다.
- 1을 추가하고 재귀 호출 → `arr` = [1]
- 1을 다시 추가하고 재귀 호출 → `arr` = [1, 1] (길이 M)
- 출력 후 다시 돌아가서 1을 제거하고 2를 추가 → `arr` = [1, 2] (길이 M)
- 출력 후 다시 돌아가서 1을 제거하고 3을 추가 → `arr` = [1, 3] (길이 M)
- 이제 1을 제거하고 2를 추가 → `arr` = [2]
- 같은 방식으로 계속 진행하여 모든 조합을 출력합니다.

### 시간 복잡도
이 알고리즘의 시간 복잡도는 O(N^M)입니다. N은 선택할 수 있는 숫자의 개수, M은 수열의 길이로, 각 자리마다 N개의 선택이 가능하므로 M번 선택하게 됩니다.

---

## 코드
```python
n, m = map(int, input().split())

arr = []
def aa():
    if len(arr) == m:
        print(*arr)
        return
    
    for i in range(1, n + 1):
        arr.append(i)
        aa()
        arr.pop()
        
aa()
```