---
layout: post
title: "[백준] 17387번 선분 교차 2 (Python)"
date: 2026-01-15
categories: [Algorithm, Baekjoon]
tags: [python, algorithm, baekjoon, "17387", 기하학, 많은 조건 분기, 선분 교차 판정]
---

## 문제 링크
[https://www.acmicpc.net/problem/17387](https://www.acmicpc.net/problem/17387)

---

## 문제
2차원 좌표 평면 위의 두 선분 L1, L2가 주어졌을 때, 두 선분이 교차하는지 아닌지 구해보자. 한 선분의 끝 점이 다른 선분이나 끝 점 위에 있는 것도 교차하는 것이다.

L1의 양 끝 점은 (x1, y1), (x2, y2), L2의 양 끝 점은 (x3, y3), (x4, y4)이다.

---

## 입력
첫째 줄에 L1의 양 끝 점 x1, y1, x2, y2가, 둘째 줄에 L2의 양 끝 점 x3, y3, x4, y4가 주어진다.

---

## 출력
L1과 L2가 교차하면 1, 아니면 0을 출력한다.

---

## 성능 요약
메모리: 108384 KB, 시간: 92 ms

---

## 풀이

### 풀이 핵심 로직
두 선분이 교차하는지를 확인하기 위해, 선분의 끝 점을 이용한 방향성(좌표의 상대적 위치)을 판단하는 `ccw` 함수를 사용합니다. 이 함수는 세 점의 방향성을 계산하여, 선분이 교차하는지 여부를 판별하는 데 필요한 조건을 제공합니다. 또한, 두 선분이 완전히 같은 직선 위에 있을 경우, 선분의 끝 점이 서로 겹치는지를 체크합니다.

### 동작 과정
1. **입력**: 두 선분 L1과 L2의 끝 점 좌표를 받습니다.
   - L1의 끝 점: (x1, y1), (x2, y2)
   - L2의 끝 점: (x3, y3), (x4, y4)

2. **ccw 함수**: 
   - `ccw` 함수는 세 점 (xa, ya), (xb, yb), (xc, yc)로 구성된 삼각형의 면적을 계산하여, 점의 위치 관계를 나타냅니다. 면적이 0이면 세 점이 일직선상에 있고, 양수면 반시계 방향, 음수면 시계 방향입니다.

3. **방향 값 계산**:
   - `o1`, `o2`, `o3`, `o4`를 이용해 각 선분의 끝 점이 서로의 선분에 대해 어떤 방향에 있는지 계산합니다.

4. **같은 직선 위에 있는 경우**:
   - 모든 방향 값(`o1`, `o2`, `o3`, `o4`)이 0인 경우, 두 선분이 일직선상에 있습니다. 이때 두 선분의 끝 점이 겹치는지를 확인합니다.

5. **교차 여부 체크**:
   - 일반적인 경우, `o1 * o2 <= 0` 및 `o3 * o4 <= 0` 조건을 통해 두 선분이 서로 교차하는지를 판단합니다.

6. **출력**: 교차하면 1, 그렇지 않으면 0을 출력합니다.

### 예시 입력
```
1 1 3 3
2 2 4 4
```
- L1: (1, 1) -> (3, 3)
- L2: (2, 2) -> (4, 4)

**단계별 설명**:
1. `ccw` 함수를 통해 방향 값 계산: `o1`, `o2`, `o3`, `o4` 모두 0이므로 두 선분은 같은 직선 위에 있습니다.
2. 두 선분의 끝 점이 겹치는지 확인: `(1, 1)`과 `(3, 3)`의 x좌표 범위 [1, 3]와 `(2, 2)`와 `(4, 4)`의 x좌표 범위 [2, 4]가 겹치는 것을 확인합니다.
3. 겹치는 경우이므로 출력: 1.

### 시간 복잡도
O(1) - 선분의 교차 여부를 판단하는 데에 필요한 연산은 상수 시간에 수행됩니다.

---

## 코드
```python
import sys
input = sys.stdin.readline

def ccw(xa, ya, xb, yb, xc, yc):
    cross = (xb - xa) * (yc - ya) - (yb - ya) * (xc - xa)
    return cross

x1, y1, x2, y2 = map(int, input().split())
x3, y3, x4, y4 = map(int, input().split())

o1 = ccw(x1, y1, x2, y2, x3, y3)
o2 = ccw(x1, y1, x2, y2, x4, y4)
o3 = ccw(x3, y3, x4, y4, x1, y1)
o4 = ccw(x3, y3, x4, y4, x2, y2)

if o1 == 0 and o2 == 0 and o3 == 0 and o4 == 0:
    if (x1, y1) > (x2, y2):
        x1, x2 = x2, x1
        y1, y2 = y2, y1
    if (x3, y3) > (x4, y4):
        x3, x4 = x4, x3
        y3, y4 = y4, y3

    
    if max(min(x1,x2), min(x3,x4)) <= min(max(x1,x2), max(x3,x4)):
        if max(min(y1,y2), min(y3,y4)) <= min(max(y1,y2), max(y3,y4)):
            print(1)
            exit()
        else:
            print(0)
            exit()
    else:
        print(0)
        exit()

if o1 * o2 <= 0 and o3 * o4 <= 0:
    print(1)
    exit()
else:
    print(0)
    exit()

```