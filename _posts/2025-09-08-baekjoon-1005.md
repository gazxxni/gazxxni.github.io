---
layout: post
title: "[백준] 1005번 (Python)"
date: 2025-09-08
categories: [Algorithm, Baekjoon]
tags: [python, algorithm, baekjoon, "1005"]
---

## 문제 링크
[https://www.acmicpc.net/problem/1005](https://www.acmicpc.net/problem/1005)

---

## 풀이

### 풀이 핵심 로직
이 문제는 주어진 건물들 간의 의존 관계를 바탕으로 특정 건물을 완공하기까지 필요한 최소 시간을 계산하는 것입니다. 주어진 건물의 시간과 의존 관계를 그래프로 표현하고, 위상 정렬을 통해 각 건물의 완공 시간을 동적 프로그래밍 방식으로 계산합니다.

### 동작 과정
1. 입력을 받고, 각 테스트 케이스에 대해 건물 수 `n`, 의존 관계 수 `k`, 각 건물의 시간 `drr`를 읽습니다.
2. 그래프를 구성하기 위해 `graph` 리스트를 생성하고, 각 건물의 진입 차수를 나타내는 `indegree` 리스트와 동적 프로그래밍을 위한 `dp` 리스트를 초기화합니다.
3. 의존 관계 `(x, y)`를 입력받으면서, `graph[x-1]`에 `y-1`을 추가하고, `indegree[y-1]`를 증가시킵니다.
4. 목표 건물 `w`를 읽고, 진입 차수가 0인 건물(의존관계가 없는 건물)을 큐에 넣고, 해당 건물의 시간을 `dp`에 기록합니다.
5. 큐가 빌 때까지 반복하며, 큐에서 건물을 꺼내 처리합니다. 이때 각 건물의 의존 관계를 따라 최대 완공 시간을 계산하고, 다음 건물의 진입 차수를 감소시킵니다.
6. 모든 건물의 계산이 끝나면 목표 건물 `w-1`의 완공 시간을 출력합니다.

예시 입력:
```
1
4 4
10 20 1 10
1 2
1 3
2 4
3 4
4
```
- 첫 번째 건물(시간 10)에서 두 번째(20)와 세 번째(1) 건물로의 의존 관계가 있고, 두 번째와 세 번째 건물이 네 번째 건물(10)로 의존합니다.
- 위상 정렬을 통해 건물 1, 2, 3을 처리한 후, 건물 4의 완공 시간을 `max(10+20, 10+1) = 30`으로 계산합니다. 결과적으로 출력은 `30`입니다.

### 시간 복잡도
O(n + k)  
- n은 건물의 수, k는 의존 관계의 수입니다. 각 건물과 의존 관계를 한 번씩만 처리하므로 총 시간 복잡도는 O(n + k)입니다.

---

## 코드
```python
import sys
input = sys.stdin.readline
from collections import deque

t = int(input())

for _ in range(t):
    n, k = map(int, input().split())
    drr = list(map(int, input().split()))
    
    graph = [[] for _ in range(n)]
    indegree = [0] * n
    dp = [0] * n
    
    for _ in range(k):
        x, y = map(int, input().split())    
        graph[x-1].append(y-1)
        indegree[y-1] += 1
        
    w = int(input())
    
    q = deque()
    for i in range(n):
        if indegree[i] == 0:
            q.append(i)
            dp[i] = drr[i]
            
    while q:
        cur = q.popleft()
        
        for next in graph[cur]:
            indegree[next] -= 1
            dp[next] = max(dp[next], dp[cur] + drr[next])
            
            if indegree[next] == 0:
                q.append(next)
                
    print(dp[w-1])
```