---
layout: post
title: "[백준] 27497번 알파벳 블록 (Python)"
date: 2025-12-07
categories: [Algorithm, Baekjoon]
tags: [python, algorithm, baekjoon, "27497", 자료 구조, 문자열, 스택, 덱]
---

## 문제 링크
[https://www.acmicpc.net/problem/27497](https://www.acmicpc.net/problem/27497)

---

## 문제
스타는 알파벳 블록을 일렬로 조립하여 문자열을 만드는 게임을 만들었다. 각 블록에는 문자 하나가 적혀 있으며 게임에는 각각 다음 기능을 수행하는 세 개의 버튼이 있다.


	문자열 맨 뒤에 블록 추가
	문자열 맨 앞에 블록 추가
	문자열을 구성하는 블록 중 가장 나중에 추가된 블록 제거


게임은 처음에 빈 문자열로 시작하며 빈 문자열일 때 문자열을 구성하는 블록 중 가장 나중에 추가된 블록을 제거하는 버튼을 누를 경우 아무런 동작도 하지 않는다. 버튼을 누른 횟수와 누른 버튼이 순서대로 주어질 때 완성된 문자열을 구하여라.

---

## 입력
첫째 줄에 버튼을 누른 횟수 N$N$이 주어진다. (1≤N≤1000000)$(1 \leq N \leq 1\,000\,000)$ 

둘째 줄부터 N$N$개의 줄에는 버튼을 누른 순서대로 누른 버튼에 대한 정보를 주며 아래와 같은 형식으로 주어진다.


	1 c : 문자열 맨 뒤에 c가 적힌 블록 추가
	2 c : 문자열 맨 앞에 c가 적힌 블록 추가
	3 : 문자열을 구성하는 블록 중 가장 나중에 추가된 블록 제거


c는 알파벳 대문자 또는 소문자로 주어진다.

---

## 출력
완성된 문자열을 출력한다. 완성된 문자열이 빈 문자열인 경우 0을 출력한다.

---

## 성능 요약
메모리: 234232 KB, 시간: 520 ms

---

## 풀이

### 풀이 핵심 로직
이 문제는 문자열을 구성하는 블록을 추가하거나 제거하는 작업을 수행하는데, 주어진 버튼의 입력에 따라 deque 자료구조를 활용하여 문자열을 관리합니다. 특히, 마지막에 추가된 블록을 제거할 때는 블록 추가 순서를 기록하는 `log` 리스트를 이용하여 어떤 블록을 제거할지를 결정합니다.

### 동작 과정
입력 예시:
```
7
1 a
1 b
2 c
3
1 d
3
3
```

1. **첫 번째 버튼 (`1 a`)**: 문자열의 맨 뒤에 `a`를 추가 -> `q`는 `['a']`, `log`는 `[1]`
2. **두 번째 버튼 (`1 b`)**: 문자열의 맨 뒤에 `b`를 추가 -> `q`는 `['a', 'b']`, `log`는 `[1, 1]`
3. **세 번째 버튼 (`2 c`)**: 문자열의 맨 앞에 `c`를 추가 -> `q`는 `['c', 'a', 'b']`, `log`는 `[1, 1, 2]`
4. **네 번째 버튼 (`3`)**: 마지막에 추가된 블록 제거 (맨 뒤 `b` 제거) -> `q`는 `['c', 'a']`, `log`는 `[1, 1]`
5. **다섯 번째 버튼 (`1 d`)**: 문자열의 맨 뒤에 `d`를 추가 -> `q`는 `['c', 'a', 'd']`, `log`는 `[1, 1, 1]`
6. **여섯 번째 버튼 (`3`)**: 마지막에 추가된 블록 제거 (맨 뒤 `d` 제거) -> `q`는 `['c', 'a']`, `log`는 `[1, 1]`
7. **일곱 번째 버튼 (`3`)**: 마지막에 추가된 블록 제거 (맨 뒤 `a` 제거) -> `q`는 `['c']`, `log`는 `[1]`

최종적으로 문자열 `q`는 `['c']`가 되어, 출력은 `c`가 됩니다.

### 시간 복잡도
이 알고리즘의 시간 복잡도는 O(N)입니다. 각 버튼 클릭에 대해 최대 O(1) 작업을 수행하기 때문에, N개의 버튼을 모두 처리하는 데 O(N) 시간이 소요됩니다.

---

## 코드
```python
import sys
from collections import deque
input = sys.stdin.readline

n = int(input())

q = deque()
log = []

for _ in range(n):
    a = input().split()
    n = int(a[0])
    
    if n == 1:
        c = a[1]
        q.append(c)
        log.append(1)
        
    elif n == 2:
        c = a[1]
        q.appendleft(c)
        log.append(2)
        
    else:
        if log:
            k = log.pop()
            
            if k == 1:
                q.pop()
            else:
                q.popleft()
    
    
if not q:
    print(0)
else:
    print(*q, sep='')
```