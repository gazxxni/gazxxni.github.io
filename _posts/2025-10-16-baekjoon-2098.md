---
layout: post
title: "[백준] 2098번 (Python)"
date: 2025-10-16
categories: [Algorithm, Baekjoon]
tags: [python, algorithm, baekjoon, "2098"]
---

## 문제 링크
[https://www.acmicpc.net/problem/2098](https://www.acmicpc.net/problem/2098)

---

## 풀이

### 풀이 핵심 로직
이 문제는 외판원 문제로, 주어진 도시를 모두 방문하고 다시 시작 도시로 돌아오는 최소 비용을 찾는 것입니다. 비트마스크와 동적 프로그래밍(DP)을 사용하여 각 도시 방문 상태를 기록하고, 방문하지 않은 도시로의 이동을 재귀적으로 탐색하여 최적의 경로를 찾습니다.

### 동작 과정
1. **입력 예시**: 
   ```
   4
   0 10 15 20
   10 0 35 25
   15 35 0 30
   20 25 30 0
   ```
   이 입력은 4개의 도시와 도시 간의 비용을 나타냅니다.

2. **초기화**:
   - `n = 4` (도시의 수)
   - `w` 배열에 도시 간의 비용이 저장됩니다.
   - `dp` 배열은 각 도시와 방문 상태에 대한 최소 비용을 저장하는 데 사용됩니다.

3. **재귀 호출**:
   - `solve(0, 1 << 0)`이 호출되며, 현재 도시가 0(시작 도시)이고 방문한 도시가 0(비트마스크)임을 나타냅니다.
   - 재귀적으로 호출이 이루어지며, 각 호출마다 방문하지 않은 도시로 이동하면서 비용을 계산합니다.

4. **비트마스크**: 
   - 방문한 도시가 비트마스크로 표현되며, 방문한 도시를 추가할 때 `visited_mask | (1 << next_city)`를 사용하여 비트마스크를 업데이트합니다.

5. **종료 조건**:
   - 모든 도시가 방문된 경우(`visited_mask == all_visited`), 시작 도시로 돌아가는 비용을 계산합니다.

6. **결과 출력**: 
   - 모든 재귀 호출이 완료되면 최종 최소 비용이 `result`에 저장되어 출력됩니다.

### 시간 복잡도
이 알고리즘의 시간 복잡도는 O(n^2 * 2^n)입니다. 이는 n개의 도시와 각 도시의 방문 상태를 비트마스크로 표현하여 2^n개의 상태를 탐색하고, 각 상태에서 n개의 도시를 고려하기 때문입니다.

---

## 코드
```python
import sys

n = int(sys.stdin.readline())
w = [list(map(int, sys.stdin.readline().split())) for _ in range(n)]

dp = [[-1] * (1 << n) for _ in range(n)]
inf = float('inf')
all_visited = (1 << n) - 1
start_city = 0

def solve(current_city, visited_mask):
    if visited_mask == all_visited:
        return w[current_city][start_city] if w[current_city][start_city] != 0 else inf

    if dp[current_city][visited_mask] != -1:
        return dp[current_city][visited_mask]

    min_cost = inf
    for next_city in range(n):
        if not (visited_mask & (1 << next_city)) and w[current_city][next_city] != 0:
            cost = w[current_city][next_city] + solve(next_city, visited_mask | (1 << next_city))
            min_cost = min(min_cost, cost)

    dp[current_city][visited_mask] = min_cost
    return min_cost

result = solve(start_city, 1 << start_city)

print(result)
```