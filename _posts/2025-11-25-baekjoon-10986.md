---
layout: post
title: "[백준] 10986번 (Python)"
date: 2025-11-25
categories: [Algorithm, Baekjoon]
tags: [python, algorithm, baekjoon, "10986"]
---

## 문제 링크
[https://www.acmicpc.net/problem/10986](https://www.acmicpc.net/problem/10986)

---

## 풀이

### 풀이 핵심 로직
주어진 배열의 구간 합이 M으로 나누어 떨어지는 경우를 찾기 위해, 누적합을 M으로 나눈 나머지가 같은 인덱스들을 찾아야 합니다. 즉, 두 누적합의 나머지가 동일하면 그 사이의 구간 합은 M으로 나누어 떨어진다는 것을 이용하여, 각 나머지의 개수를 세고 이를 기반으로 가능한 쌍의 개수를 계산합니다.

### 동작 과정
1. **입력 예시**: `n = 5`, `m = 3`, `arr = [1, 2, 3, 1, 2]`
2. **초기 설정**: `remainder_count` 배열을 `[0, 0, 0]`으로 초기화하고, `remainder_count[0]`를 1로 설정합니다. 이는 누적합이 0일 때 (즉, 처음부터 구간 합이 M으로 나누어 떨어지는 경우)에 대한 카운트입니다.
3. **순회 시작**:
   - `current_sum = 0`
   - `x = 1`: `current_sum = 1`, `r = 1 % 3 = 1`, `remainder_count` 업데이트: `[0, 1, 0]`
   - `x = 2`: `current_sum = 3`, `r = 3 % 3 = 0`, `remainder_count` 업데이트: `[1, 1, 0]`
   - `x = 3`: `current_sum = 6`, `r = 6 % 3 = 0`, `remainder_count` 업데이트: `[2, 1, 0]`
   - `x = 1`: `current_sum = 7`, `r = 7 % 3 = 1`, `remainder_count` 업데이트: `[2, 2, 0]`
   - `x = 2`: `current_sum = 9`, `r = 9 % 3 = 0`, `remainder_count` 업데이트: `[3, 2, 0]`
4. **쌍의 계산**: 
   - 나머지 0: `cnt = 3`, 쌍 개수 = `3 * (3 - 1) / 2 = 3`
   - 나머지 1: `cnt = 2`, 쌍 개수 = `2 * (2 - 1) / 2 = 1`
   - 나머지 2: `cnt = 0`, 쌍 개수 = 0
5. **최종 결과**: 총 쌍의 개수는 `3 + 1 = 4`가 되어 출력됩니다.

### 시간 복잡도
O(n) - 배열을 한 번 순회하면서 누적합과 나머지를 계산하고, 나머지 배열에 대한 처리를 하기 때문입니다.

---

## 코드
```python
import sys
input = sys.stdin.readline

'''
1. 구간 합이 M으로 나누어 떨어진다는 것은 
(prefix_sum[j] - prefix_sum[i-1]) % M == 0이라는 뜻

2. 이 식을 이항하면 prefix_sum[j] % M == prefix_sum[i-1] % M

3. 즉, 누적합을 M으로 나눈 나머지가 같은 인덱스들을 찾으면 됨
'''
n, m = map(int, input().split())
arr = list(map(int, input().split()))

# 1. 나머지를 카운트할 배열 또는 딕셔너리 준비
remainder_count = [0] * m

# 2. 누적합 변수 초기화
current_sum = 0

# 3. 나머지가 0인 경우를 미리 카운트
remainder_count[0] = 1 

# 4. 수열을 순회하면서 누적합과 나머지 계산
for x in arr:
    current_sum += x
    r = current_sum % m
    remainder_count[r] += 1

ans = 0
for cnt in remainder_count:
    # 해당 나머지를 가진 누적합의 개수가 2개 이상일 때만 쌍을 만들 수 있음
    if cnt > 1:
        ans += (cnt * (cnt - 1)) // 2

print(ans)
```